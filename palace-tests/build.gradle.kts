
android {
    packaging {
        jniLibs {
            keepDebugSymbols.add("lib/**/*.so")

            /*
             * Various components (R2, the PDF library, LCP, etc) include this shared library.
             */

            pickFirsts.add("lib/arm64-v8a/libc++_shared.so")
            pickFirsts.add("lib/armeabi-v7a/libc++_shared.so")
            pickFirsts.add("lib/x86/libc++_shared.so")
            pickFirsts.add("lib/x86_64/libc++_shared.so")
        }
    }
}

afterEvaluate {
    tasks.matching { task -> task.name.contains("UnitTest") }
        .forEach { task -> task.enabled = true }
}

val dependencyObjects = listOf(
    project(":palace-accessibility"),
    project(":palace-accounts-api"),
    project(":palace-accounts-database"),
    project(":palace-accounts-database-api"),
    project(":palace-accounts-json"),
    project(":palace-accounts-registry"),
    project(":palace-accounts-registry-api"),
    project(":palace-accounts-source-nyplregistry"),
    project(":palace-accounts-source-spi"),
    project(":palace-adobe-extensions"),
    project(":palace-analytics-api"),
    project(":palace-analytics-circulation"),
    project(":palace-announcements"),
    project(":palace-bookmarks"),
    project(":palace-bookmarks-api"),
    project(":palace-books-api"),
    project(":palace-books-audio"),
    project(":palace-books-borrowing"),
    project(":palace-books-controller"),
    project(":palace-books-controller-api"),
    project(":palace-books-covers"),
    project(":palace-books-database"),
    project(":palace-books-database-api"),
    project(":palace-books-formats"),
    project(":palace-books-formats-api"),
    project(":palace-books-preview"),
    project(":palace-books-registry-api"),
    project(":palace-books-time-tracking"),
    project(":palace-boot-api"),
    project(":palace-buildconfig-api"),
    project(":palace-content-api"),
    project(":palace-crashlytics"),
    project(":palace-crashlytics-api"),
    project(":palace-db"),
    project(":palace-db-api"),
    project(":palace-documents"),
    project(":palace-feeds-api"),
    project(":palace-files"),
    project(":palace-futures"),
    project(":palace-json-core"),
    project(":palace-lcp"),
    project(":palace-links"),
    project(":palace-links-json"),
    project(":palace-mdc"),
    project(":palace-notifications"),
    project(":palace-opds-auth-document"),
    project(":palace-opds-auth-document-api"),
    project(":palace-opds-client"),
    project(":palace-opds-core"),
    project(":palace-opds2"),
    project(":palace-opds2-irradia"),
    project(":palace-opds2-parser-api"),
    project(":palace-opds2-pwp"),
    project(":palace-parser-api"),
    project(":palace-patron"),
    project(":palace-patron-api"),
    project(":palace-presentableerror-api"),
    project(":palace-profiles"),
    project(":palace-profiles-api"),
    project(":palace-profiles-controller-api"),
    project(":palace-reader-api"),
    project(":palace-reports"),
    project(":palace-services-api"),
    project(":palace-taskrecorder-api"),
    project(":palace-tenprint"),
    project(":palace-threads"),
    project(":palace-ui"),
    project(":palace-ui-errorpage"),
    project(":palace-ui-images"),
    project(":palace-ui-screen"),
    project(":palace-viewer-api"),
    project(":palace-viewer-audiobook"),
    project(":palace-viewer-epub-readium2"),
    project(":palace-viewer-pdf-pdfjs"),
    project(":palace-viewer-preview"),
    project(":palace-viewer-spi"),
    project(":palace-webview"),

    libs.androidx.activity,
    libs.androidx.activity.ktx,
    libs.androidx.annotation,
    libs.androidx.appcompat,
    libs.androidx.cardview,
    libs.androidx.constraintlayout,
    libs.androidx.coordinatorlayout,
    libs.androidx.core,
    libs.androidx.core.ktx,
    libs.androidx.core.splashscreen,
    libs.androidx.customview,
    libs.androidx.drawerlayout,
    libs.androidx.fragment,
    libs.androidx.fragment.ktx,
    libs.androidx.lifecycle.common,
    libs.androidx.lifecycle.extensions,
    libs.androidx.lifecycle.livedata,
    libs.androidx.lifecycle.livedata.core,
    libs.androidx.lifecycle.livedata.core.ktx,
    libs.androidx.lifecycle.livedata.ktx,
    libs.androidx.lifecycle.viewmodel,
    libs.androidx.lifecycle.viewmodel.savedstate,
    libs.androidx.media,
    libs.androidx.paging.common,
    libs.androidx.paging.common.ktx,
    libs.androidx.paging.runtime,
    libs.androidx.paging.runtime.ktx,
    libs.androidx.preference,
    libs.androidx.recycler.view,
    libs.androidx.savedstate,
    libs.androidx.swiperefreshlayout,
    libs.androidx.test.monitor,
    libs.androidx.viewpager2,
    libs.androidx.webkit,
    libs.apiguardian,
    libs.azam.ulidj,
    libs.bouncycastle.bcprov,
    libs.bytebuddy,
    libs.bytebuddy.agent,
    libs.commons.compress,
    libs.commons.io,
    libs.conscrypt,
    libs.firebase.analytics,
    libs.firebase.crashlytics,
    libs.firebase.messaging,
    libs.google.failureaccess,
    libs.google.guava,
    libs.google.material,
    libs.google.protobuf,
    libs.hamcrest,
    libs.io7m.dixmont.core,
    libs.io7m.jattribute.core,
    libs.io7m.jfunctional,
    libs.io7m.jmulticlose,
    libs.io7m.jnull,
    libs.io7m.junreachable,
    libs.irradia.fieldrush.api,
    libs.irradia.fieldrush.vanilla,
    libs.irradia.mime.api,
    libs.irradia.mime.vanilla,
    libs.irradia.opds2.api,
    libs.irradia.opds2.lexical,
    libs.irradia.opds2.librarysimplified,
    libs.irradia.opds2.parser.api,
    libs.irradia.opds2.parser.extension.spi,
    libs.irradia.opds2.parser.librarysimplified,
    libs.irradia.opds2.parser.vanilla,
    libs.jackson.annotations,
    libs.jackson.core,
    libs.jackson.databind,
    libs.jackson.datatype.jdk8,
    libs.jackson.datatype.jsr310,
    libs.jackson.kotlin,
    libs.javax.annotation.api,
    libs.javax.inject,
    libs.jcip.annotations,
    libs.joda.time,
    libs.jsoup,
    libs.junit,
    libs.junit.jupiter.api,
    libs.junit.jupiter.engine,
    libs.junit.jupiter.vintage,
    libs.junit.platform.commons,
    libs.junit.platform.engine,
    libs.kabstand,
    libs.kotlin.reflect,
    libs.kotlin.stdlib,
    libs.kotlinx.coroutines,
    libs.kotlinx.datetime,
    libs.kotlinx.serialization.core,
    libs.kotlinx.serialization.core.jvm,
    libs.kotlinx.serialization.json,
    libs.kotlinx.serialization.json.jvm,
    libs.kotlinx.serialization.protobuf,
    libs.logback.classic,
    libs.logback.core,
    libs.media3.common,
    libs.media3.datasource,
    libs.media3.exoplayer,
    libs.media3.extractor,
    libs.media3.session,
    libs.mockito.android,
    libs.mockito.core,
    libs.objenesis,
    libs.okhttp3,
    libs.okhttp3.mockwebserver,
    libs.okio,
    libs.opentest,
    libs.org.json,
    libs.ow2,
    libs.ow2.asm,
    libs.ow2.asm.commons,
    libs.ow2.asm.tree,
    libs.palace.audiobook.api,
    libs.palace.audiobook.downloads,
    libs.palace.audiobook.feedbooks,
    libs.palace.audiobook.http,
    libs.palace.audiobook.lcp.downloads,
    libs.palace.audiobook.lcp.license.status,
    libs.palace.audiobook.license.check.api,
    libs.palace.audiobook.license.check.spi,
    libs.palace.audiobook.manifest.api,
    libs.palace.audiobook.manifest.fulfill.api,
    libs.palace.audiobook.manifest.fulfill.basic,
    libs.palace.audiobook.manifest.fulfill.opa,
    libs.palace.audiobook.manifest.fulfill.spi,
    libs.palace.audiobook.manifest.parser.api,
    libs.palace.audiobook.manifest.parser.extension.spi,
    libs.palace.audiobook.manifest.parser.webpub,
    libs.palace.audiobook.media3,
    libs.palace.audiobook.parser.api,
    libs.palace.audiobook.persistence,
    libs.palace.audiobook.time.tracking,
    libs.palace.audiobook.views,
    libs.palace.drm.core,
    libs.palace.http.api,
    libs.palace.http.bearer.token,
    libs.palace.http.refresh.token,
    libs.palace.http.downloads,
    libs.palace.http.uri,
    libs.palace.http.vanilla,
    libs.palace.overdrive,
    libs.palace.readium2.api,
    libs.palace.readium2.vanilla,
    libs.palace.readium2.views,
    libs.palace.theme,
    libs.palace.webpub.core,
    libs.picasso,
    libs.play.services.base,
    libs.play.services.basement,
    libs.play.services.cloud.messaging,
    libs.play.services.location,
    libs.play.services.measurement.api,
    libs.play.services.tasks,
    libs.r2.lcp,
    libs.r2.opds,
    libs.r2.shared,
    libs.r2.streamer,
    libs.reactive.streams,
    libs.robolectric,
    libs.robolectric.annotations,
    libs.robolectric.junit,
    libs.robolectric.nativeruntime,
    libs.robolectric.pluginapi,
    libs.robolectric.plugins.maven.dependency.resolver,
    libs.robolectric.resources,
    libs.robolectric.sandbox,
    libs.robolectric.shadowapi,
    libs.robolectric.shadows.framework,
    libs.robolectric.utils,
    libs.robolectric.utils.reflector,
    libs.rxandroid2,
    libs.rxjava,
    libs.rxjava2,
    libs.rxjava2.extensions,
    libs.slf4j,
    libs.transifex.sdk,

    // SQLite
    libs.io7m.anethum.api,
    libs.io7m.blackthorne.core,
    libs.io7m.blackthorne.jxe,
    libs.io7m.jaffirm.core,
    libs.io7m.jattribute.core,
    libs.io7m.jlexing.core,
    libs.io7m.junreachable,
    libs.io7m.jxe.core,
    libs.io7m.seltzer.api,
    libs.io7m.trasco.api,
    libs.io7m.trasco.vanilla,
    libs.io7m.trasco.xml.schemas,
    libs.io7m.xyloid.natives,
    libs.xerces,
    libs.xerial.sqlite,
)

dependencies {
    coreLibraryDesugaring(libs.android.desugaring)

    for (dep in dependencyObjects) {
        implementation(dep)
        testImplementation(dep)
    }
}
